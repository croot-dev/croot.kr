<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Notion Database ì™€ Github Pages ì—°ë™í•˜ê¸° - Croot Blog</title>
  <meta name="description" content="Intro">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Mono|Roboto:300,400,900,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/%EA%B8%B0%EC%88%A0/2023/12/02/Notion-Database-%EC%99%80-Github-Pages-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0/">
  <link rel="alternate" type="application/rss+xml" title="Croot Blog" href="http://localhost:4000/feed.xml">
</head>

  <body>
    <aside class="c-page__searchbox">
  <div class="search">
    <input id="search-input" 
      type="search" 
      tabindex="1" 
      spellcheck="false" 
      placeholder="ê²€ìƒ‰ì–´"
    />
  </div>

  <ul id="results-container"></ul>
</aside>

<script src="/assets//script/simple-jekyll-search.min.js"></script>
<script type="text/javascript">
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/assets/json/search.json',
    noResultText: 'ê²€ìƒ‰ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.',
    limit: 1000,
    fuzzy: false
  })
</script>

    <main class="u-container">
      <div class="c-page">
  <header class="c-page__header">
  <h1><code>Croot Blog</code></h1>
  
  <p>
    <a href="/">Home</a>
    <span class="u-separate"></span>
    <a href="/about/">About</a>
    <span class="u-separate"></span>
    <a href="/tech/">Tech</a>
    <span class="u-separate"></span>
    <a href="/hobby/">Hobby</a>
    <span class="u-separate"></span>
    <a href="/archive/">Archive</a>
  </p>
</header>

  <div class="c-page__main">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError : false
        });
    });
</script>

<div>

<div style="display:flex;flex-direction:row;background:#efefef;padding: 1.2em 1.5em;">
  <span style="width:70px;font-size:2.8em">âš ï¸</span>
  <p style="flex:1;font-size:1.2em;line-height: 1.5;word-break: keep-all;">
    <span>ì´ ë¸”ë¡œê·¸ì˜ ëª¨ë“  í¬ìŠ¤íŠ¸ëŠ” Notion ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìë™ ë³€í™˜í•˜ì—¬ ì‘ì„± ë˜ì—ˆìŠµë‹ˆë‹¤.</span><br />
    <span>ë”°ë¼ì„œ ë¬¸ì„œì— ë”°ë¼ ê¹¨ì ¸ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span><br />
    <span>ë” ë§ì€ ë‚´ìš©ì´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ğŸ‘€</span> <a href="https://www.notion.so/croot-dev/6c50e956396b41449b42a8e134d97c4e" target="_blank" style="margin-top:12px;z-index:1">Notion ë³´ëŸ¬ê°€ê¸°</a>
  </p>
</div>

</div>

<article class="c-article">
  <header class="c-article__header">
    <h1 class="c-article__title">Notion Database ì™€ Github Pages ì—°ë™í•˜ê¸°</h1>
    <!-- <p class="c-article__time"><time datetime="2023-12-02T00:00:00+09:00" itemprop="datePublished">Dec 2, 2023</time></p> -->
  </header>

  <div class="c-article__info">
    <table>
      <tbody>
        <tr>
          <th>ì‘ì„±ì¼</th><td>2023ë…„ 12ì›” 02ì¼</td>
        </tr>
        <tr>
          <th>ìˆ˜ì •ì¼</th><td>2024ë…„ 01ì›” 03ì¼</td>
        </tr>
        <tr>
          <th>ì¹´í…Œê³ ë¦¬</th><td>ê¸°ìˆ </td>
        </tr>
        <tr>
          <th>íƒœê·¸</th><td>
            <ul class="c-tags">
              
            </ul>
          </td>
        </tr>
        
      </tbody>
    </table>
  </div>

  <div class="c-article__main">
    <h2 id="intro">Intro</h2>

<p>ìš”ì¦˜ì€ ë‹¤ fork ë– ì„œ ë§Œë“¤ê¸´ í•˜ë˜ë° ê°„ë§Œì— ì‚½ì§ˆë„ ì¢€ í•´ë³¼ ê²¸ ì§ì ‘ í•´ë³´ì•˜ë‹¤.</p>

<h2 id="ì¤€ë¹„">ì¤€ë¹„</h2>

<ol>
  <li>Notion í…œí”Œë¦¿ ì‘ì„±
    <ol>
      <li></li>
    </ol>
  </li>
  <li>API í† í° ìƒì„±
    <ol>
      <li>Notion <strong><code class="language-plaintext highlighter-rouge">í”„ë¼ì´ë¹— API í†µí•© ì‹œí¬ë¦¿</code></strong> ìƒì„±í•˜ê¸°
 ğŸ”— <a href="https://www.notion.so/my-integrations">https://www.notion.so/my-integrations</a></li>
      <li>
        <p>Notion database ID</p>

        <p>ğŸ”— <a href="https://developers.notion.com/reference/retrieve-a-database">https://developers.notion.com/reference/retrieve-a-database</a></p>
      </li>
      <li>
        <p>Github Token
 ğŸ”— <a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a></p>

        <p><strong><code class="language-plaintext highlighter-rouge">Generate New Token(Classic)</code></strong> ì„ íƒ í›„ <strong><code class="language-plaintext highlighter-rouge">repo</code></strong>,Â <strong><code class="language-plaintext highlighter-rouge">workflow</code></strong>,Â <strong><code class="language-plaintext highlighter-rouge">admin:repo_hook</code></strong> ì„¸ê°€ì§€ë¥¼ ì²´í¬í•˜ì—¬ í† í° ìƒì„±.</p>
      </li>
    </ol>

    <div class="callout" style="display:flex;width:100%;border-radius:4px;background:rgb(241,241,239);padding: 16px 16px 16px 12px;">
 <div style="display:flex;align-items:center;justify-content:center;height:24px;width:24px;border-radius:0.25em;flex-shrink:0;">ğŸ’¡</div>
 <div style="white-space:pre-wrap;word-break:break-word;caret-color:rgb(55, 53, 47);margin-left:8px;padding-left:2px;padding-right:2px;">ë‚˜ëŠ” ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">.env.local</code> ì—ë‹¤ê°€ ì €ì¥í–ˆë‹¤.</div>
 </div>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># .env.local</span>
 <span class="s">NOTION_TOKEN=*****</span>
 <span class="s">DATABASE_ID=*****</span>
 <span class="s">COMMIT_TOKEN=*****</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="í™˜ê²½-ì„¤ì¹˜">í™˜ê²½ ì„¤ì¹˜</h2>

<div class="callout" style="display:flex;width:100%;border-radius:4px;background:rgb(241,241,239);padding: 16px 16px 16px 12px;">
<div style="display:flex;align-items:center;justify-content:center;height:24px;width:24px;border-radius:0.25em;flex-shrink:0;">ğŸ’¡</div>
<div style="white-space:pre-wrap;word-break:break-word;caret-color:rgb(55, 53, 47);margin-left:8px;padding-left:2px;padding-right:2px;">ì•„ë˜ ì„¤ì¹˜ì—ì„œëŠ” <a href="https://brew.sh/" target="_blank">homebrew</a>ë¥¼ ì´ìš©í•œë‹¤.</div>
</div>

<ol>
  <li>
    <p><a href="https://github.com/rbenv/rbenv"><strong><code class="language-plaintext highlighter-rouge">rbenv</code></strong></a>, <a href="https://github.com/nvm-sh/nvm"><strong><code class="language-plaintext highlighter-rouge">nvm</code></strong></a> ì„¤ì¹˜</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> brew <span class="nb">install </span>rbenv nvm
</code></pre></div>    </div>

    <div class="callout" style="display:flex;width:100%;border-radius:4px;background:rgb(241,241,239);padding: 16px 16px 16px 12px;">
 <div style="display:flex;align-items:center;justify-content:center;height:24px;width:24px;border-radius:0.25em;flex-shrink:0;">ğŸ’¡</div>
 <div style="white-space:pre-wrap;word-break:break-word;caret-color:rgb(55, 53, 47);margin-left:8px;padding-left:2px;padding-right:2px;"><code class="language-plaintext highlighter-rouge"><strong>rbenv</strong></code> : Ruby ë²„ì „ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€<br /><code class="language-plaintext highlighter-rouge"><strong>nvm</strong></code> : Node ë²„ì „ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€</div>
 </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Node 18</code> ì„¤ì¹˜</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> nvm <span class="nb">install </span>18
 nvm use 18
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Ruby 3.1.0</code> ì„¤ì¹˜</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># ruby 3.1.0 ì„¤ì¹˜</span>
 <span class="s">rbenv install 3.1.0</span>
 <span class="s">rbenv rehash</span>
 <span class="s">rbenv global 3.1.0</span>
</code></pre></div>    </div>

    <div class="callout" style="display:flex;width:100%;border-radius:4px;background:rgb(241,241,239);padding: 16px 16px 16px 12px;">
 <div style="display:flex;align-items:center;justify-content:center;height:24px;width:24px;border-radius:0.25em;flex-shrink:0;">ğŸ’¡</div>
 <div style="white-space:pre-wrap;word-break:break-word;caret-color:rgb(55, 53, 47);margin-left:8px;padding-left:2px;padding-right:2px;"><code class="language-plaintext highlighter-rouge"><strong>rbenv</strong></code>ëŠ” ì—¬ëŸ¬ ë£¨ë¹„ ë²„ì „ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í‚¤ì§€ì´ë‹¤.</div>
 </div>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">bundler</code></strong>(ë£¨ë¹„ íŒ¨í‚¤ì§€ ê´€ë¦¬ í”„ë¡œê·¸ë¨) ì„¤ì¹˜</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># Permission ë¬¸ì œë¡œ sudo ì´ìš©í•˜ì—¬ ì‹¤í–‰.</span>
 <span class="nb">sudo </span>gem <span class="nb">install </span>bundler
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="ì„¤ì •íŒŒì¼">ì„¤ì •íŒŒì¼</h2>

<div class="callout" style="display:flex;width:100%;border-radius:4px;background:rgb(241,241,239);padding: 16px 16px 16px 12px;">
<div style="display:flex;align-items:center;justify-content:center;height:24px;width:24px;border-radius:0.25em;flex-shrink:0;">ğŸ’¡</div>
<div style="white-space:pre-wrap;word-break:break-word;caret-color:rgb(55, 53, 47);margin-left:8px;padding-left:2px;padding-right:2px;">íŒŒì¼ ê²½ë¡œëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œë¥¼ ìµœìƒë‹¨ìœ¼ë¡œ ì •ì˜í•˜ì—¬ ì‘ì„±í•¨.</div>
</div>

<ol>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">package.json</code></strong> ìƒì„±</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># yarn ì‚¬ìš© ì‹œ</span>
 yarn init
 <span class="c"># npm ì‚¬ìš© ì‹œ</span>
 npm init
</code></pre></div>    </div>

    <blockquote>
      <p>í”„ë¡œì íŠ¸ ìƒì„¸ ë‚´ìš©ì€ ì•Œì•„ì„œ ì‘ì„±</p>
    </blockquote>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">jekyll</code></strong> ì„¤ì¹˜</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> bundler add jekyll
 bundler <span class="nb">exec </span>jekyll new <span class="nb">.</span> <span class="nt">--skip-bundle</span> <span class="nt">--force</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì„¤ì •íŒŒì¼ ìƒì„±</p>
    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">/package.json</code></strong> : í”„ë¡œì íŠ¸ ì •ë³´ íŒŒì¼</p>

        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">{</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">croot-dev.github.io</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">main</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">index.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">repository</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://github.com/croot-dev/croot-dev.github.io.git</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">croot &lt;croot.dev@gmail.com&gt;</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">private</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">scripts</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">generate</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cross-env NODE_ENV=local ENV_PATH=.env.local node ./_scripts/notionPageImporter</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">build</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bundle exec jekyll build</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">serve</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bundle exec jekyll serve</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">devDependencies</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">@notionhq/client</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^1.0.4</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">@types/node-fetch</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^2.6.2</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">cross-env</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^7.0.3</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">dayjs</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^1.11.10</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">dotenv</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^16.3.1</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">notion-to-md</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^2.5.5</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">dependencies</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">^1.6.2</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">/Gemfile</code></strong> : Ruby ì˜ì¡´ì„± ì •ì˜ íŒŒì¼</p>

        <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">source</span> <span class="s2">"https://rubygems.org"</span>
		
  gem <span class="s2">"jekyll"</span>, <span class="s2">"~&gt; 3.9.3"</span>
  <span class="c"># gem "minima", "~&gt; 2.5"</span>
  gem <span class="s2">"github-pages"</span>, <span class="s2">"~&gt; 228"</span>, group: :jekyll_plugins
  group :jekyll_plugins <span class="k">do
    </span>gem <span class="s2">"jekyll-paginate-v2"</span>
    gem <span class="s2">"jekyll-sitemap"</span>
  end
		
  platforms :mingw, :x64_mingw, :mswin, :jruby <span class="k">do
    </span>gem <span class="s2">"tzinfo"</span>, <span class="s2">"&gt;= 1"</span>, <span class="s2">"&lt; 3"</span>
    gem <span class="s2">"tzinfo-data"</span>
  end
		
  gem <span class="s2">"wdm"</span>, <span class="s2">"~&gt; 0.1.1"</span>, :platforms <span class="o">=&gt;</span> <span class="o">[</span>:mingw, :x64_mingw, :mswin]
		
  gem <span class="s2">"http_parser.rb"</span>, <span class="s2">"~&gt; 0.6.0"</span>, :platforms <span class="o">=&gt;</span> <span class="o">[</span>:jruby]
  gem <span class="s2">"webrick"</span>, <span class="s2">"~&gt; 1.8"</span>
  gem <span class="s2">"html-proofer"</span>, <span class="s2">"~&gt; 5.0"</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">/_scripts/notionPageImporter.ts</code></strong> : ë…¸ì…˜ í˜ì´ì§€ë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸</p>

        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// notionPageImporter.ts</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">Client</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@notionhq/client</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">NotionToMarkdown</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">notion-to-md</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">dayjs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">dayjs</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">fs</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
		
  <span class="c1">// ë…¸ì…˜ ë°ì´í„°ë² ì´ìŠ¤ ì†ì„±ëª…</span>
  <span class="kd">const</span> <span class="nx">PROPERTY</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">PUBLISH</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ê³µê°œ</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// íƒ€ì…: ì²´í¬ë°•ìŠ¤(checkbox)</span>
    <span class="na">TITLE</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ê²Œì‹œë¬¼</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// íƒ€ì…: ì œëª©(plain_text)</span>
    <span class="na">CATEGORY</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ì¹´í…Œê³ ë¦¬</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">TAGS</span><span class="p">:</span> <span class="dl">'</span><span class="s1">íƒœê·¸</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// íƒ€ì…: ë‹¤ì¤‘ì„ íƒ(multi_select)</span>
		  
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">DEFAULT_CATEGORY_NAME</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ê¸°íƒ€</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// ì¹´í…Œê³ ë¦¬ ì—†ì„ ì‹œ ê¸°ë³¸ìœ¼ë¡œ ì ìš©í•  ì¹´í…Œê³ ë¦¬ ëª…</span>
		
  <span class="c1">// Using dotenv in local</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">local</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">dotenv</span><span class="dl">'</span><span class="p">).</span><span class="nx">config</span><span class="p">({</span> <span class="na">path</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">ENV_PATH</span><span class="p">,</span> <span class="na">override</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
  <span class="p">}</span>
		
  <span class="kd">const</span> <span class="nx">notion</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">({</span>
    <span class="na">auth</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NOTION_TOKEN</span><span class="p">,</span>
  <span class="p">});</span>
		
  <span class="kd">const</span> <span class="nx">rootDir</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">_posts</span><span class="dl">"</span><span class="p">;</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">mkdirSync</span><span class="p">(</span><span class="nx">rootDir</span><span class="p">,</span> <span class="p">{</span> <span class="na">recursive</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
		
  <span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
		
    <span class="kd">const</span> <span class="nx">databaseId</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABASE_ID</span><span class="p">;</span>
    <span class="c1">// TODO has_more</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">notion</span><span class="p">.</span><span class="nx">databases</span><span class="p">.</span><span class="nx">query</span><span class="p">({</span>
      <span class="na">database_id</span><span class="p">:</span> <span class="nx">databaseId</span><span class="p">,</span>
      <span class="na">filter</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">property</span><span class="p">:</span> <span class="nx">PROPERTY</span><span class="p">.</span><span class="nx">PUBLISH</span><span class="p">,</span>
        <span class="na">checkbox</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">equals</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">});</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">properties</span><span class="p">,</span> <span class="nx">created_time</span><span class="p">,</span> <span class="nx">last_edited_time</span> <span class="p">}</span> <span class="k">of</span> <span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// date</span>
      <span class="kd">const</span> <span class="nx">createdDate</span> <span class="o">=</span> <span class="nx">dayjs</span><span class="p">(</span><span class="nx">created_time</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="dl">"</span><span class="s2">YYYY-MM-DD</span><span class="dl">"</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">updatedDate</span> <span class="o">=</span> <span class="nx">dayjs</span><span class="p">(</span><span class="nx">last_edited_time</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="dl">"</span><span class="s2">YYYY-MM-DD</span><span class="dl">"</span><span class="p">);</span>
		    
      <span class="c1">// title</span>
      <span class="kd">const</span> <span class="nx">tempTitle</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">?.[</span><span class="nx">PROPERTY</span><span class="p">.</span><span class="nx">TITLE</span><span class="p">]?.[</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">];</span>
      <span class="kd">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">tempTitle</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">?</span> <span class="nx">tempTitle</span><span class="p">[</span><span class="mi">0</span><span class="p">]?.[</span><span class="dl">"</span><span class="s2">plain_text</span><span class="dl">"</span><span class="p">]</span> <span class="p">:</span> <span class="nx">id</span><span class="p">;</span>
		
      <span class="c1">// category</span>
      <span class="kd">const</span> <span class="nx">category</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">?.[</span><span class="nx">PROPERTY</span><span class="p">.</span><span class="nx">CATEGORY</span><span class="p">]?.[</span><span class="dl">"</span><span class="s2">select</span><span class="dl">"</span><span class="p">]?.</span><span class="nx">name</span> <span class="o">||</span> <span class="nx">DEFAULT_CATEGORY_NAME</span><span class="p">;</span>
		
      <span class="c1">// tags</span>
      <span class="kd">const</span> <span class="nx">tagList</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">?.[</span><span class="nx">PROPERTY</span><span class="p">.</span><span class="nx">TAGS</span><span class="p">]?.[</span><span class="dl">"</span><span class="s2">multi_select</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="kd">const</span> <span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagList</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">tag</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">tag</span><span class="p">[</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">]}</span><span class="s2">`</span><span class="p">);</span>
		
      <span class="c1">// frontmatter</span>
      <span class="kd">const</span> <span class="nx">frontmatter</span> <span class="o">=</span> <span class="s2">`---
  layout: post
  title: "</span><span class="p">${</span><span class="nx">title</span><span class="p">}</span><span class="s2">"
  created: </span><span class="p">${</span><span class="nx">createdDate</span><span class="p">}</span><span class="s2">
  edited: </span><span class="p">${</span><span class="nx">updatedDate</span><span class="p">}</span><span class="s2">
  category: [</span><span class="p">${</span><span class="nx">category</span><span class="p">}</span><span class="s2">]
  tags: [</span><span class="p">${</span><span class="nx">tags</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="p">)}</span><span class="s2">]
  ---
		
  `</span><span class="p">;</span>
		    
      <span class="c1">// passing notion client to the option</span>
      <span class="kd">const</span> <span class="nx">n2m</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NotionToMarkdown</span><span class="p">({</span> <span class="na">notionClient</span><span class="p">:</span> <span class="nx">notion</span> <span class="p">});</span>
      <span class="kd">const</span> <span class="nx">blocks</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">n2m</span><span class="p">.</span><span class="nx">pageToMarkdown</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">markdown</span> <span class="o">=</span> <span class="nx">n2m</span><span class="p">.</span><span class="nx">toMarkdownString</span><span class="p">(</span><span class="nx">blocks</span><span class="p">)[</span><span class="dl">"</span><span class="s2">parent</span><span class="dl">"</span><span class="p">];</span>
      <span class="kd">const</span> <span class="nx">fileTitle</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">createdDate</span><span class="p">}</span><span class="s2">-</span><span class="p">${</span><span class="nx">title</span><span class="p">.</span><span class="nx">replaceAll</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">-</span><span class="dl">"</span><span class="p">)}</span><span class="s2">.md`</span><span class="p">;</span>
		
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">markdown</span><span class="p">)</span> <span class="p">{</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>
		
      <span class="kd">let</span> <span class="nx">imageIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">edited_markdown</span> <span class="o">=</span> <span class="nx">markdown</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
        <span class="sr">/!</span><span class="se">\[(</span><span class="sr">.*</span><span class="se">?)\]\((</span><span class="sr">.*</span><span class="se">?)\)</span><span class="sr">/g</span><span class="p">,</span>
        <span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">,</span> <span class="nx">p3</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">dirname</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="s2">assets/img</span><span class="dl">"</span><span class="p">,</span> <span class="nx">fileTitle</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fs</span><span class="p">.</span><span class="nx">existsSync</span><span class="p">(</span><span class="nx">dirname</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">fs</span><span class="p">.</span><span class="nx">mkdirSync</span><span class="p">(</span><span class="nx">dirname</span><span class="p">,</span> <span class="p">{</span> <span class="na">recursive</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
          <span class="p">}</span>
          <span class="kd">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">dirname</span><span class="p">,</span> <span class="s2">`</span><span class="p">${</span><span class="nx">imageIndex</span><span class="p">}</span><span class="s2">.png`</span><span class="p">);</span>
		
          <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">p2</span><span class="p">,</span> <span class="p">{</span> <span class="na">responseType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">stream</span><span class="dl">"</span> <span class="p">})</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">let</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">filename</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
              <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
            <span class="p">});</span>
		
          <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">(</span><span class="nx">p1</span> <span class="o">===</span> <span class="dl">''</span><span class="p">)?</span> <span class="dl">''</span> <span class="p">:</span> <span class="s2">`_</span><span class="p">${</span><span class="nx">p1</span><span class="p">}</span><span class="s2">_`</span><span class="p">;</span>
          <span class="k">return</span> <span class="s2">`![</span><span class="p">${</span><span class="nx">imageIndex</span><span class="o">++</span><span class="p">}</span><span class="s2">]`</span> <span class="o">+</span> <span class="s2">`(/</span><span class="p">${</span><span class="nx">filename</span><span class="p">}</span><span class="s2">)`</span> <span class="o">+</span> <span class="s2">`</span><span class="p">${</span><span class="nx">res</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
        <span class="p">});</span>
		
      <span class="c1">// Write file</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">rootDir</span><span class="p">,</span> <span class="nx">fileTitle</span><span class="p">),</span> <span class="nx">frontmatter</span> <span class="o">+</span> <span class="nx">edited_markdown</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">})();</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">/.github/workflows/pages-deploy.yaml</code></strong> : github action ìŠ¤í¬ë¦½íŠ¸</p>

        <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Build</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">Deploy"</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">repository_dispatch</span><span class="pi">:</span>
      <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">RUN_WORKFLOW_DISPATCH</span><span class="pi">]</span>
<span class="err">		</span>      
  <span class="na">permissions</span><span class="pi">:</span>
    <span class="na">contents</span><span class="pi">:</span> <span class="s">write</span>
    <span class="na">pages</span><span class="pi">:</span> <span class="s">write</span>
    <span class="na">id-token</span><span class="pi">:</span> <span class="s">write</span>
		
  <span class="c1"># Allow one concurrent deployment</span>
  <span class="na">concurrency</span><span class="pi">:</span>
    <span class="na">group</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pages"</span>
    <span class="na">cancel-in-progress</span><span class="pi">:</span> <span class="no">true</span>
		
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">importer</span><span class="pi">:</span>
      <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
		
      <span class="na">steps</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@master</span>
		    
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Clean Directory</span>
          <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">for file in assets/img/*</span>
            <span class="s">do</span>
                <span class="s">if [[ $file != "assets/img/favicons" ]]</span>
                <span class="s">then</span>
                    <span class="s">rm -rf "$file"</span>
                <span class="s">fi</span>
            <span class="s">done</span>
            <span class="s">rm -rf _site</span>
		      
        <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-node@v2</span>
          <span class="na">with</span><span class="pi">:</span>
            <span class="na">node-version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">17"</span>
<span class="err">		</span>
        <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">npm install</span>
		
        <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">node _scripts/notionPageImporter.js</span>
          <span class="na">env</span><span class="pi">:</span>
            <span class="na">NOTION_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
            <span class="na">DATABASE_ID</span><span class="pi">:</span> <span class="s">$</span>
		
        <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">stefanzweifel/git-auto-commit-action@v4</span>
          <span class="na">env</span><span class="pi">:</span>
            <span class="na">GITHUB_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
          <span class="na">with</span><span class="pi">:</span>
            <span class="na">commit_message</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[ë°°í¬]</span><span class="nv"> </span><span class="s">Notion</span><span class="nv"> </span><span class="s">ë³€ê²½</span><span class="nv"> </span><span class="s">ì‚¬í•­</span><span class="nv"> </span><span class="s">ì €ì¥"</span>
            <span class="na">branch</span><span class="pi">:</span> <span class="s">main</span>
            <span class="na">commit_user_name</span><span class="pi">:</span> <span class="s">importer-bot ğŸ¤–</span>
            <span class="na">commit_user_email</span><span class="pi">:</span> <span class="s">actions@github.com</span>
            <span class="na">commit_author</span><span class="pi">:</span> <span class="s">importer-bot ğŸ¤– &lt;actions@github.com&gt;</span>
		 
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">needs</span><span class="pi">:</span> <span class="s">importer</span>
      <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
		
      <span class="na">steps</span><span class="pi">:</span>           
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Checkout</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
          <span class="na">with</span><span class="pi">:</span>
            <span class="na">ref</span><span class="pi">:</span> <span class="s">main</span>
            <span class="na">fetch-depth</span><span class="pi">:</span> <span class="m">1</span>
            <span class="c1"># submodules: true</span>
            <span class="c1"># If using the 'assets' git submodule from Chirpy Starter, uncomment above</span>
            <span class="c1"># (See: https://github.com/cotes2020/chirpy-starter/tree/main/assets)</span>
<span class="err">		</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup Pages</span>
          <span class="na">id</span><span class="pi">:</span> <span class="s">pages</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/configure-pages@v1</span>
		
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup Ruby</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">ruby/setup-ruby@v1</span>
          <span class="na">with</span><span class="pi">:</span>
            <span class="na">ruby-version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.1'</span> <span class="c1"># reads from a '.ruby-version' or '.tools-version' file if 'ruby-version' is omitted</span>
            <span class="na">bundler-cache</span><span class="pi">:</span> <span class="no">true</span>
		
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build site</span>
          <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec jekyll b -d "_site"</span>
          <span class="na">env</span><span class="pi">:</span>
            <span class="na">JEKYLL_ENV</span><span class="pi">:</span> <span class="s2">"</span><span class="s">production"</span>
<span class="err">		</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Test site</span>
          <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">bundle exec htmlproofer _site --disable-external --checks --allow_hash_href</span>
		
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upload site artifact</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-pages-artifact@v1</span>
          <span class="na">with</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">_site"</span>
<span class="err">		</span>
<span class="err">    </span><span class="na">deploy</span><span class="pi">:</span>
      <span class="na">environment</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">github-pages</span>
        <span class="na">url</span><span class="pi">:</span> <span class="s">$</span>
      <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
      <span class="na">needs</span><span class="pi">:</span> <span class="s">build</span>
      <span class="na">steps</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to GitHub Pages</span>
          <span class="na">id</span><span class="pi">:</span> <span class="s">deployment</span>
          <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/deploy-pages@v1</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">.env.local</code></strong>  (ì¤€ë¹„ &gt; API í† í° ìƒì„± ë‹¨ê³„ ì°¸ê³ í•˜ì—¬ ì‘ì„±)</p>

        <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="s">NOTION_TOKEN=#YOUR_NOTION_TOKEN</span>
  <span class="s">DATABASE_ID=#YOUR_DATABASE_ID</span>
  <span class="s">COMMIT_TOKEN=#YOUR_COMMIT_TOKEN</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h2 id="í…ŒìŠ¤íŠ¸">í…ŒìŠ¤íŠ¸</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn <span class="nb">test
</span>yarn serve
</code></pre></div></div>

<blockquote>
  <p><a href="http://localhost:4000/">http://localhost:4000</a> ì ‘ì†í•˜ì—¬ í™•ì¸ ê°€ëŠ¥.</p>
</blockquote>

<h2 id="ë°°í¬">ë°°í¬</h2>

<ol>
  <li>
    <p>Repository secrets ì¶”ê°€</p>

    <p>https://github.com/<strong>[Github ID]</strong>/<strong>[Repository Name]</strong>/settings/secrets/actions</p>

    <p>ìœ„ ì£¼ì†Œë¡œ ì ‘ê·¼í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ê°’ë“¤ì„ ë„£ì–´ì¤€ë‹¤. (ìœ„ì— ìƒì„±í•œ <strong><code class="language-plaintext highlighter-rouge">.env.local</code></strong> ì°¸ê³ )</p>

    <p><img src="/assets/img/2023-12-02-Notion-Database-ì™€-Github-Pages-ì—°ë™í•˜ê¸°.md/0.png" alt="0" /><em>github secrets actions</em></p>
  </li>
  <li>
    <p>ë°°í¬ ìš”ì²­ API í˜¸ì¶œí•˜ëŠ” HTML ìƒì„± (<strong><code class="language-plaintext highlighter-rouge">COMMIT_TOKEN</code></strong> ìˆ˜ì • ì…ë ¥ í•„ìš”)</p>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;!DOCTYPE html&gt;</span>
 <span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;head&gt;</span>
   <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;/head&gt;</span>
 <span class="nt">&lt;body&gt;</span>
   <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"triggerButton"</span> <span class="na">class=</span><span class="s">"trigger-button"</span><span class="nt">&gt;</span>ê°±ì‹ <span class="nt">&lt;/button&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"message"</span> <span class="na">class=</span><span class="s">"message"</span><span class="nt">&gt;&lt;/div&gt;</span>
	
   <span class="nt">&lt;script&gt;</span>
   <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">triggerButton</span><span class="dl">"</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">messageElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">);</span>
     <span class="nx">messageElement</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">ìš”ì²­ ì „ì†¡ ì¤‘...</span><span class="dl">"</span><span class="p">;</span>
	
     <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
     <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://api.github.com/repos/croot-dev/croot-dev.github.io/dispatches</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
     <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/vnd.github.v3+json</span><span class="dl">"</span><span class="p">);</span>
     <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Bearer [YOUR_COMMIT_TOKEN]</span><span class="dl">"</span><span class="p">);</span>
     <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>
	
     <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">204</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">messageElement</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
       <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nx">messageElement</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">ìš”ì²­ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.&lt;br&gt;ìƒíƒœ ì½”ë“œ: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
       <span class="p">}</span>
     <span class="p">};</span>
	
     <span class="nx">xhr</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="nx">messageElement</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">ìš”ì²­ ì „ì†¡ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</span><span class="dl">"</span><span class="p">;</span>
     <span class="p">};</span>
	
     <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="dl">"</span><span class="s2">event_type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">RUN_WORKFLOW_DISPATCH</span><span class="dl">"</span><span class="p">}));</span>
   <span class="p">});</span>
 <span class="nt">&lt;/script&gt;</span>
 <span class="nt">&lt;/body&gt;</span>
 <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>

    <div class="callout" style="display:flex;width:100%;border-radius:4px;background:rgb(241,241,239);padding: 16px 16px 16px 12px;">
 <div style="display:flex;align-items:center;justify-content:center;height:24px;width:24px;border-radius:0.25em;flex-shrink:0;">ğŸ’¡</div>
 <div style="white-space:pre-wrap;word-break:break-word;caret-color:rgb(55, 53, 47);margin-left:8px;padding-left:2px;padding-right:2px;">ë¡œì»¬ì—ì„œ HTML íŒŒì¼ì„ ì—´ì–´ì„œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ github actionì´ ì‹¤í–‰ëœë‹¤.</div>
 </div>
  </li>
</ol>

<h2 id="í™•ì¸">í™•ì¸</h2>

<p>http://[Github ID].github.io ì£¼ì†Œë¡œ ì ‘ê·¼í•˜ì—¬ ë°°í¬ í™•ì¸.</p>

<h2 id="troubleshooting"><strong>Troubleshooting</strong></h2>

<p><strong>Cause:</strong>  ë¡œì»¬ê³¼ Github Actions í”Œë«í¼ ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ì˜¤ë¥˜</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> bundle <span class="nb">install</span>
/opt/hostedtoolcache/Ruby/3.1.4/x64/bin/bundle config <span class="nt">--local</span> path /home/runner/work/croot-dev.github.io/croot-dev.github.io/vendor/bundle
/opt/hostedtoolcache/Ruby/3.1.4/x64/bin/bundle config <span class="nt">--local</span> deployment <span class="nb">true
</span>Cache key: setup-ruby-bundler-cache-v6-ubuntu-22.04-x64-ruby-3.1.4-wd-/home/runner/work/croot-dev.github.io/croot-dev.github.io-with--without--only--Gemfile.lock-073fe0d893d3d26402573dc722ed2240f3b54e2043dff09f2f61ef058a7aecd1
/opt/hostedtoolcache/Ruby/3.1.4/x64/bin/bundle <span class="nb">install</span> <span class="nt">--jobs</span> 4
Your bundle only supports platforms <span class="o">[</span><span class="s2">"x86_64-darwin-22"</span><span class="o">]</span> but your <span class="nb">local </span>platform
is x86_64-linux. Add the current platform to the lockfile with
<span class="sb">`</span>bundle lock <span class="nt">--add-platform</span> x86_64-linux<span class="sb">`</span> and try again.
Error: The process <span class="s1">'/opt/hostedtoolcache/Ruby/3.1.4/x64/bin/bundle'</span> failed with <span class="nb">exit </span>code 16
</code></pre></div></div>

<p><strong>Resolve:</strong>   Github Actions ë§ì¶”ì–´ lockfile ìˆ˜ì •.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle lock <span class="nt">--add-platform</span> x86_64-linux
</code></pre></div></div>

<h2 id="references">References</h2>

<p><a href="https://aymanbagabas.com/blog/2022/03/29/import-notion-pages-to-jekyll.html">https://aymanbagabas.com/blog/2022/03/29/import-notion-pages-to-jekyll.html</a></p>

<p><a href="https://lourcode.kr/posts/Jekyll-%EA%B8%B0%EB%B0%98-Github-Pages%EC%99%80-Notion-Page-%EC%97%B0%EB%8F%99/">https://lourcode.kr/posts/Jekyll-ê¸°ë°˜-Github-Pagesì™€-Notion-Page-ì—°ë™/</a></p>


  </div>

  <div class="c-article__comment">
    <script src="https://utteranc.es/client.js"
        repo="croot-dev/croot-dev.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
  </div>


  <!-- Previous / Next Buttons -->
  <div class="pagenav">
    
    <div class="wrapper" id="left">
      <small><b>Previous</b> Dec 1, 2023</small>
      <br>
      <a class="no-hov" href="/%EA%B8%B0%EC%88%A0/2023/12/01/husky-script/">&laquo; husky script</a>
    </div>
    
    
    <div class="wrapper" id="right">
      <small>Dec 2, 2023 <b>Next</b></small>
      <br>
      <a class="no-hov" href="/%EA%B8%B0%EC%88%A0/2023/12/02/Ruby-gems-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B8%B0/">Ruby gems ì‚­ì œí•˜ê¸° &raquo;</a>
    </div>
    
  </div>
  <!-- Disqus comments view -->
  
</article>

  </div>
  <footer class="c-page__footer">
  <p>&copy; croot-dev.github.io 2026</p>
  <p><a href="https://github.com/croot-dev">Github</a></p>
</footer>

</div>

    </main>
    
  </body>
</html>
